BPM=87,sampleRate=48e3,tf=abs(t/sampleRate/180*3*32768*BPM),p=(1/sampleRate*128)*440*2**(2/12),

// What you're seeing is feeshbread's Dead Data Reverb
t||(fb1=fb2=0,wsin=(phase)=>(-cos(phase/128*PI)+1)*128-.5,fx=[],dMax=1e6,lpf=lowPassFilter=(a,c)=>(lp_fxii=fxi++,fx[lp_fxii]??=0,fx[lp_fxii]+=(a-fx[lp_fxii])*c),hpf=highPassFilter=(a,c)=>a-lpf(a,c),bpf=bandPassFilter=(a,hc,lc)=>hpf(lpf(a,lc),hc),bbf=bandBoostFilter=(a,hc,lc,v)=>a+bpf(a,hc,lc)*v,n=noise=c=>(ni=fxi++,fx[ni]??=0,fx[ni]=fx[ni]+(random()-.5-fx[ni])*c),alpf=asyncLowPassFilter=(a,cu,cd)=>(si=fxi++,fx[si]??=0,sr=fx[si],fx[si]+=(a-sr)*(sr<a?cu:cd)),dly=multiTapdlay=(audio,heads,dw,fbfn=x=>x)=>{dly_fxii=fxi++;fx[dly_fxii]??=Array(dMax).fill(0);dly_wi=dt%dMax;dly_feed=audio;dly_out=0;for(let head of heads){dly_ri=(dMax+dt-round(head.t))%dMax;dly_feed+=fx[dly_fxii][dly_ri]*head.fb;dly_out+=fx[dly_fxii][dly_ri]*head.m;}fx[dly_fxii][dly_wi]=fbfn(dly_feed);return audio*(1-dw)+dly_out*dw;},cmp=(a,th,ra,at,rl,sc=a)=>(ci=fxi++,fx[ci],a/(alpf(max(abs(sc)-th,0),at,rl)/th*ra+1))),fxi=0,dt=t,q=(30*sampleRate)/(BPM*3/3),rvrbHeads=[[{t:1e3+wsin(t/210),m:.5,fb:.15},{t:1e4+wsin(t/250),m:.5,fb:.35},{t:17e3+wsin(t/300),m:.1,fb:.45},{t:37e3+wsin(t/380),m:.1,fb:.65},{t:q*1.005+wsin(t*1.005/256),m:1,fb:.25}],[{t:11e2-wsin(t/230),m:.5,fb:.15},{t:13e3-wsin(t/270),m:.5,fb:.35},{t:14e3-wsin(t/280),m:.1,fb:.45},{t:4e4-wsin(t/400),m:.1,fb:.65},{t:q*.995-wsin(t*.995/256),m:1,fb:.25}]],

d=echo=j=>16192+(sin(t*j/4096)*1e3)*j,r=tf/8,pt=r%4096,x=(j,wv,hs)=>(b=a=>(t/a*p*2**((parseInt('DFHCDFHK'[r>>14&7],36)-1)/12))%256-128,kc=(1-(r/1024)%1)*!(r>>10&3),tanh(cmp(bbf(tanh(sin(14*sqrt(pt)**.65))*kc*222*(1-r/2048%1)**2+hpf(n(.6)*120*(1-((r/1024)%1)**.5)**1.5,.1)+(atan(sin((2e6+(pt)*8)*(1-(1/((pt)*100+.1))*2)/70))*8*(max((1-pt/2048*2),0)**1.8)*(r>>12&1)+(fb1=hpf(fb1*.5+n(.2)*14*(1-((r/8192+.5)%1))**2,.2)))*24,.025,.2,-.5)+2*((r/4096%1*.8+.2)*(1-kc)**1.3)*(dly(fb2=hpf(bpf(-fb2+((e=a=>((t/8*a*p*2**((parseInt('013578'[(r>>10)%6],36)-1)/12)<<(1.25*(r>>[10,11][r/3>>10&1])&3)>>1&63))-((r>>10|1)&31)&256),e(1)+e(j)),.05,.9),.08)/2,hs,.55,x=>tanh(bpf(x,.01,.8)/180)*100)+bbf(1.3*lpf((b(4*j)+b(8))/4,(1-((r/1024)%1))**2*.3+.02)*(1-r/1024%1)**.1*(r/4096%1)**.1,.01,.5,-.3)),50,1,.01,.1e-3)/40))*1.1,[x(1.005,sin,rvrbHeads[0]),x(.995,cos,rvrbHeads[1])]