x = j => {
  l = t * j;
  l |= ((l & 16384 ? -l : l) >> 12 & 15);

  arpm = [
    [-5, -7, -9, -7],
    [2, 0, -2, 0],
    [7, 5, 3, 5]
  ];

  wave = l =>
    64 * tanh(
      sin(sin(l * PI / 256) * 1.3 + l * PI / 128 + cos(l * PI / 64) * 2 + tanh(sin(l * PI / 16)))
    );

  m = t => (
    t *= (t >= 0),
    wave(
      l * 2 * 2 ** ([
        -5, -3, 0, 2, -5, -3, 0, -3,
        -5, -3, 0, 2, -5, -2, 0, -5,
        -7, -5, -3, 0, -7, -5, -3, 2,
        -7, -5, -3, 4, -7, -5, -3, 5
      ][31 & t >> 14] / 12)
    ) * (1 - t % 16384 / 24e3)
  );

  wave2 = u =>
    128 * tanh(
      sin(sin(u * PI / 128) * 1.3 + cos(u * PI / 64) + abs(sin(u * PI / 32)) + 1.2 * abs(cos(u * PI / 256)))
    );

  a = t => min(
    max(
      wave2(l / 2 * 2 ** (arpm[0][3 & t >> 18] / 12)) % 256 / 3 +
      wave2(l / 2 * 2 ** (arpm[1][3 & t >> 18] / 12)) % 256 / 3 +
      wave2(l / 2 * 2 ** (arpm[2][3 & t >> 18] / 12)) % 256 / 3 - 64,
      -64
    ),
    63
  ) * 1.25;

  mel = m(t) + (m(t - 24576) / 2) + (m(t - 36864) / 3) + (m(t - 49152) / 4);
  har = a(t);

  kick = 256 * cbrt(tanh(sin((t % (t & 32768 ? 32768 : 24576)) ** 0.5))) * ((1 - t / (t & 32768 ? 32768 : 24576) % 1) ** 3);

  snare = ((t * sin(l >> 3) & 128) * ((1 - t / 32768 % 1) ** 7) * (1 & t >> 15)) * 8;

  hihat = 64 * cbrt(tan(sin(random() * (1 - t / 16384 % 1) ** 7)));

  m2 = t => (
    t *= (t >= 0),
    wave2(
      l * 2 ** ([
        14, 12, 10, 9, 14, 12, 10, 7,
        14, 12, 10, 5, 14, 12, 10, 4
      ][15 & t >> 14] / 12)
    ) / 2 * ((1 - t / 16384 % 1) ** 3)
  );

  mel2 = m2(t) + (m2(t - 24576) / 2) + (m2(t - 36864) / 3) + (m2(t - 49152) / 4)

  return min(
    max(
      [
        har,
        har + mel,
        har + mel + kick,
        har + mel + kick + snare + hihat,
        (har * 2) + kick + snare + hihat,
        har + (mel2 * 1.5),
        har + (mel2 * 1.5) + kick,
        (har * 2) + (mel2 * 2) + kick + snare + hihat,
        (har * 2) + (mel2 * 2) + kick + snare + hihat,
        mel2 + har,
        mel + (har / 2),
        har
      ][t >> 20],
      -128
    ),
    127
  ) || 0;
},

[x(1.005), x(0.995)];